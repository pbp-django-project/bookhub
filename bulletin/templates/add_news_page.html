{% extends 'base.html' %}
{% load static %}
{% block title %}add new bulletin{% endblock title %}

{% block content %}
{% include 'header.html' %}
<br>
<br>

<div>
    <div style="min-height: 40vh; display: flex; margin-left: 50px;">
        <form id="addBulletinForm">
            {% csrf_token %}
            <label for="title" style="width: 120px; display: inline-block;">Title:</label>
            <input type="text" id="title" name="title" style="width: 700px;" required>
            <br>
            <span class="text-red-500 ">{{ form.errors.title }}</span>
            <br>
            <label for "author" style="width: 120px; display: inline-block;">Author:</label>
            <input type="text" id="author" name="author" style="width: 700px;" required>
            <br>
            <span class="text-red-500 ">{{ form.errors.author }}</span>
            <br>

            <label for="date_published" style="width: 120px; display: inline-block;">Date Published :</label>
            <input type="datetime-local" id="date_published" name="date_published" required>
            <br>
            <span class="text-red-500 ">{{ form.errors.date_published }}</span>
            <br>

            <div class="flex ">
                <label for="content" style="width: 120px; display: inline-block;">Content:</label>
                <textarea id="content" name="content" style="width: 700px; height: 350px; overflow: auto;" required></textarea>
            </div>
            <br>
            <span class="text-red-500 ">{{ form.errors.content }}</span>
            <br>
            <div class="ml-40">
                <button type="button" id="submitBtn" class="px-12 py-2 bg-teal-500 text-white hover:bg-teal-700 rounded">
                    Add Bulletin
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    document.getElementById('submitBtn').addEventListener('click', function () {
        var formData = new FormData(document.getElementById('addBulletinForm'));
        var xhr = new XMLHttpRequest();
        xhr.open('POST', "{% url 'bulletin:add-news-page' %}", true);
        xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                window.location.href = '{% url "bulletin:show-bulletin" %}';

            }
        };
        xhr.send(formData);
    });
</script>


<br>
{% include 'footer.html' %}
{% endblock content %}